Process와 Thread의 차이

process unit
- program의 단위

thread unit
- 프로세스의 실행 단위 / work의 단위

thread는 code data heap 영역을 공유하고 같은 stack 영역에서 개별 stack을 가진다.
process는 개별 code data heap stack 영역을 가진다.

따라서 context switch에서 thread는 stack주소를 가리키는 address만 교체해주면 된다.



멀티 스레드와 멀티 프로세스의 차이

멀티 스레드는 동기화 문제와 오류로 하나의 스레드가 죽으면 전체가 다 죽을 수 있음


프로그램을 메모리에 올리는 순간 프로세가 된다.

#### 스택을 스레드마다 독립적으로 할당하는 이유
스택은 함수 호출 시 전달되는 인자, 되돌아갈 주소값 및 함수 내에서 선언하는 변수 등을 저장하기 위해 사용되는 메모리 공간이므로 스택 메모리 공간이 독립적이라는 것은 독립적인 함수 호출이 가능하다는 것이고 이는 독립적인 실행 흐름이 추가되는 것이다. 따라서 스레드의 정의에 따라 독립적인 실행 흐름을 추가하기 위한 최소 조건으로 독립된 스택을 할당한다.

#### PC Register 를 스레드마다 독립적으로 할당하는 이유
PC 값은 스레드가 명령어의 어디까지 수행하였는지를 나타나게 된다. 스레드는 CPU 를 할당받았다가 스케줄러에 의해 다시 선점당한다. 그렇기 때문에 명령어가 연속적으로 수행되지 못하고 어느 부분까지 수행했는지 기억할 필요가 있다. 따라서 PC 레지스터를 독립적으로 할당한다.

[ref](https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/OS)  
[ref](https://ypangtrouble.tistory.com/entry/%EC%8A%A4%EB%A0%88%EB%93%9C-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%A7%81)  
[ref](https://you9010.tistory.com/136)  
[ref](https://blog.seulgi.kim/2016/03/fork-in-multithread.html)  
[ref](https://kldp.org/node/155799)  
[ref](https://www.gnu.org/software/libc/manual/html_node/CPU-Affinity.html)  
[ref](https://quasarzone.co.kr/bbs/board.php?bo_table=qf_cmr&wr_id=12864)  
[ref](http://blog.naver.com/PostView.nhn?blogId=strike0115&logNo=221440344642&parentCategoryNo=&categoryNo=52&viewDate=&isShowPopularPosts=true&from=search)  
[ref](https://codedragon.tistory.com/3525)  
[ref](https://stackoverflow.com/questions/5514464/difference-between-pthread-and-fork-on-gnu-linux)  
[ref](https://twpower.github.io/127-multi-processing-threading-programming)  
