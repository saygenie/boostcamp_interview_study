# OAuth란 무엇인가

OAuth는 사용자들이 아이디와 비밀번호를 입력하지 않고 웹 사이트나 웹 어플리케이션에서 다른 웹 어플리케이션으로 접근할 수 있도록 하는 인가 방식이다.

## 동작 원리

먼저 비유해서 말해보자면, 아이디와 비밀번호를 가지고 로그인하는 방식은 사원증을 가지고 회사에 들어가는 방식이다. 하지만 외부 손님이 올 경우에는 사원증을 가지고 출입하는 것이 아니라 방문증을 가지고 입장하게 된다. 여기서 생각해야할 점은 외부 손님 또한 믿을 수 있는 회사에 다녀야한다는 것이다.

![](https://upload.wikimedia.org/wikipedia/commons/3/32/OpenIDvs.Pseudo-AuthenticationusingOAuth.svg)

그림과 비교해보자면 안드로이드가 방문하고자 하는 회사, 구글이 외부 손님이 다니고 있는 회사이다.

## OAuth 2.0

OAuth 1.0은 웹 애플리케이션이 아닌 애플리케이션에서는 사용하기 곤란하다는 단점이 있었다. OAuth 2.0은 이를 보완하는 작업에 있다. (아직 최종안이 나오지 않았다.)

- 웹 애플리케이션이 아닌 애플리케이션 지원 강화
- 암호화가 필요 없음 HTTPS를 사용하고 HMAC을 사용하지 않는다.
- Siganature 단순화 정렬과 URL 인코딩이 필요 없다.
- Access Token 갱신 OAuth 1.0에서 Access Token을 받으면 Access Token을 계속 사용할 수 있었다. 트위터의 경우에는 Access Token을 만료시키지 않는다. OAuth 2.0에서는 보안 강화를 위해 Access Token의 Life-time을 지정할 수 있도록 했다.

### 이해관계자

- Resource Owner (사용자)
- Resource Server (예. 네이버, 페이스북)
- Client (예. 쇼핑몰)

1. 사용자가 쇼핑몰 홈페이지에 네이버 로그인을 통해 회원 가입하려고 한다.
2. 쇼핑몰 홈페이지가 네이버 로그인 창을 띄우고 사용자가 네이버 로그인을 한다.
3. 로그인이 정상적으로 되면, 네이버가 사용자에게 코드를 준다.
4. 사용자는 코드를 쇼핑몰 홈페이지에게 보내주고 자신이 네이버 회원이라는 것을 인증한다.
5. 쇼핑몰 홈페이지는 사용자에게 받은 코드를 가지고 네이버에게 네이버 회원인지 물어본다.
6. 네이버가 맞다는 확인을 하면, Access Token을 쇼핑몰 홈페이지에게 주고 그것을 저장한다.
7. 사용자는 네이버 회원인 것을 쇼핑몰 홈페이지에게 인정을 받고 서비스를 이용할 수 있다.